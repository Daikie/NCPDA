<!DOCTYPE html>
<html lang="ja">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="Cache-Control" content="no-cache">
	<meta http-equiv="Expires" content="0">
	<meta name="keywords" content="目黒区,品川区,西小山,小児科,皮膚科,アレルギー,クリニック,光線療法,予防接種,ワクチン,乳児健診,ヶ月健診,児健診,遠隔診療,オンライン診療">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1">
	<title>西小山クリニック～初診受付方法を変更します～</title>
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/styles.css">
	<style>
        table {
            border-collapse: collapse;
            width: 100%;
            table-layout: fixed; /* テーブルの幅を固定 */
        }
        th, td {
            border: 1px solid black;
            padding: 8px;
            text-align: center;
            white-space: nowrap; /* セル内のテキストを改行しない */
            overflow: hidden; /* セルからはみ出るテキストを隠す */
            text-overflow: ellipsis; /* はみ出たテキストを...で表示 */
        }
        th:nth-child(1), td:nth-child(1) {
            width: 25%; /* 項目列の幅調整 */
        }
        th:nth-child(2), td:nth-child(2) {
            width: 37.5%; /* 期間列の幅調整 */
        }
        th:nth-child(3), td:nth-child(3) {
            width: 37.5%; /* 期間列の幅調整 */
        }
        .chart-container {
            width: 100%; /* 幅を100%に設定 */
            height: 400px;
            margin: auto;
        }
        canvas {
            width: 100% !important;
            height: 100% !important;
        }
        .percentage-table {
            width: 100%; /* 幅を100%に設定 */
            margin: 20px auto;
            border-collapse: collapse;
        }
        .percentage-table th, .percentage-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        .percentage-table th {
            background-color: #f2f2f2;
        }
        .increase {
            color: green;
            font-weight: bold;
        }
        .decrease {
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
	<nav id="header-nav" class="navbar navbar-expand-lg navbar-light">
		<div class="navbar-header">
			<a href="index.html" class="float-left d-none d-sm-block">
				<div id="logo-img" alt="Logo image"></div>
			</a>
			<div class="navbar-brand">
				<a href="index.html"><h1>西小山クリニック</h1></a>
				<h2>小児科・皮膚科・アレルギー科</h2>
			</div>
		</div>
		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarSupportedContent">
			<ul class="navbar-nav mr-auto">
				<li class="nav-item active">
					<a class="nav-link" href="index.html#reserve">
						<svg viewBox="0 0 16 16" class="bi bi-menu-up" xmlns="http://www.w3.org/2000/svg">
							<path d="M6.5 10.995V14.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5V11c0-.25-.25-.5-.5-.5H7c-.25 0-.5.25-.5.495z"/>
							<path fill-rule="evenodd" d="M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"/>
						</svg>
						<br class="d-none d-lg-block">受診方法
					</a>
				</li>
				<li class="nav-item active">
					<a class="nav-link" href="index.html#services">
						<svg viewBox="0 0 16 16" class="bi bi-menu-up" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" d="M15 3.207v9a1 1 0 0 1-1 1h-3.586A2 2 0 0 0 9 13.793l-1 1-1-1a2 2 0 0 0-1.414-.586H2a1 1 0 0 1-1-1v-9a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm-13 11a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-3.586a1 1 0 0 0-.707.293l-1.353 1.354a.5.5 0 0 1-.708 0L6.293 14.5a1 1 0 0 0-.707-.293H2z"/>
							<path fill-rule="evenodd" d="M15 5.207H1v1h14v-1zm0 4H1v1h14v-1zm-13-5.5a.5.5 0 0 0 .5.5h6a.5.5 0 1 0 0-1h-6a.5.5 0 0 0-.5.5zm0 4a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 0-1h-11a.5.5 0 0 0-.5.5zm0 4a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 0-1h-8a.5.5 0 0 0-.5.5z"/>
						</svg>
						<br class="d-none d-lg-block">診療内容
					</a>
				</li>
				<li class="nav-item active">
					<a class="nav-link" href="index.html#staff">
						<svg viewBox="0 0 16 16" class="bi bi-card-list" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" d="M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1H7zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5.784 6A2.238 2.238 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.325 6.325 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1h4.216zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z"/>
						</svg>
						<br class="d-none d-lg-block">医師経歴
					</a>
				</li>
				<li class="nav-item active">
					<a class="nav-link" href="index.html#access">
						<svg viewBox="0 0 16 16" class="bi bi-building" xmlns="http://www.w3.org/2000/svg">
							<path fill-rule="evenodd" d="M14.763.075A.5.5 0 0 1 15 .5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V14h-1v1.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V10a.5.5 0 0 1 .342-.474L6 7.64V4.5a.5.5 0 0 1 .276-.447l8-4a.5.5 0 0 1 .487.022zM6 8.694L1 10.36V15h5V8.694zM7 15h2v-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 .5.5V15h2V1.309l-7 3.5V15z"/>
							<path d="M2 11h1v1H2v-1zm2 0h1v1H4v-1zm-2 2h1v1H2v-1zm2 0h1v1H4v-1zm4-4h1v1H8V9zm2 0h1v1h-1V9zm-2 2h1v1H8v-1zm2 0h1v1h-1v-1zm2-2h1v1h-1V9zm0 2h1v1h-1v-1zM8 7h1v1H8V7zm2 0h1v1h-1V7zm2 0h1v1h-1V7zM8 5h1v1H8V5zm2 0h1v1h-1V5zm2 0h1v1h-1V5zm0-2h1v1h-1V3z"/>
						</svg>
						<br class="d-none d-lg-block">アクセス
					</a>
				</li>
			</ul>
		</div>
	</nav>
	<div class="container">
		<h2>初診受付方法を変更します。</h2>
		<p>2025年2月から<span class="markR">順番制を導入し、診察を受けられる人数は8.6%増えました</span>。みなさまのご協力に感謝申し上げます。
			<br>一方で、診察順番の<span class="markB">受付を開始してから1-2分で受付可能人数に達してしまうことが多く</span>なっており、受診したいのにできないというお声を頻繁にいただくようになりました。
			<br>解決法を探るため、以下のグラフを作成しました。順番制導入前の7カ月間と、導入後の7カ月間に受診された方の内訳を比較したものです。
		</p>
	    <script src="js/chart.js"></script>
	    <script src="js/chartjs-plugin-datalabels@2.0.0"></script>
		<div class="chart-container">
	        <canvas id="stackedBarChart"></canvas>
	    </div>
	    

	    <table class="percentage-table">
	        <thead>
	            <tr>
	                <th>項目</th>
	                <th>変化率</th>
	            </tr>
	        </thead>
	        <tbody>
	        	<tr>
	                <td>全体</td>
	                <td id="total-percentage"></td>
	            </tr>
	            <tr>
	                <td>初診</td>
	                <td id="shoshin-percentage"></td>
	            </tr>
	            <tr>
	                <td>初診者の再診</td>
	                <td id="shoshinsaishin-percentage"></td>
	            </tr>
	            <tr>
	                <td>以前からの再診</td>
	                <td id="saisaishin-percentage"></td>
	            </tr>
	        </tbody>
	    </table>
	    <p>受診された総人数は8.6%増えているのですが、それにも増して初診の方の受診された人数が268%も増加しております。
	    	<br>それだけでなく、初診後も平均して2カ月に1回程度受診されているため、結果として以前から受診されている方が受診しづらくなり、16.4%減少しております。</p>
	    <p>もちろん今医療が必要な方を新たに受け入れることは診療所の機能として重要なことですが、<span class="markR">継続的な治療が必要な方が受診できない状況を放置できない</span>と考えました。
	    	<br>そこで、初診の受付人数を絞り、再診の方が多少でも順番を取りやすいようにしたいと思います。</p>
	    <p>順番制の中で初診人数に制限をかけることができないため、<span class="markR">初診に関しては完全予約制</span>とします。
	    	<br>初診予約は月・火・木・金の午前1枠とすると、初診の人数が1/4程度に減らせる計算です。
	    	<br>土曜日と平日午後は非常に混雑し、その時間帯しかお越しになれない方が初診で来られると再診が困難になるため初診枠を設けません。
	    	<br>再診の方が順番を取りやすくなる効果が得られるまでに多少お時間はいただくと思いますが、ご理解いただければ幸いです。</p>
	    <script>
	        const data = {
	            '初診': [137, 505],
	            '初診者の再診': [374, 1016],
	            '以前からの再診': [3873, 3239]
	        };

	        const calculatePercentage = (start, end) => {
	            if (start === 0) return end > 0 ? '---' : '0.0%';
	            const percentage = ((end - start) / start) * 100;
	            return percentage.toFixed(1) + '%';
	        };

	        const updateTable = () => {
	        	document.getElementById('total-percentage').textContent = calculatePercentage(data['初診'][0]+data['初診者の再診'][0]+data['以前からの再診'][0], data['初診'][1]+data['初診者の再診'][1]+data['以前からの再診'][1]);
	            document.getElementById('shoshin-percentage').textContent = calculatePercentage(data['初診'][0], data['初診'][1]);
	            document.getElementById('shoshinsaishin-percentage').textContent = calculatePercentage(data['初診者の再診'][0], data['初診者の再診'][1]);
	            document.getElementById('saisaishin-percentage').textContent = calculatePercentage(data['以前からの再診'][0], data['以前からの再診'][1]);

	            const total = document.getElementById('total-percentage');
	            const shoshin = document.getElementById('shoshin-percentage');
	            const shoshinsaishin = document.getElementById('shoshinsaishin-percentage');
	            const saisaishin = document.getElementById('saisaishin-percentage');

	            if (parseFloat(total.textContent) > 0) total.classList.add('increase');
	            else if (parseFloat(total.textContent) < 0) total.classList.add('decrease');

	            if (parseFloat(shoshin.textContent) > 0) shoshin.classList.add('increase');
	            else if (parseFloat(shoshin.textContent) < 0) shoshin.classList.add('decrease');
	            
	            if (parseFloat(shoshinsaishin.textContent) > 0) shoshinsaishin.classList.add('increase');
	            else if (parseFloat(shoshinsaishin.textContent) < 0) shoshinsaishin.classList.add('decrease');

	            if (parseFloat(saisaishin.textContent) > 0) saisaishin.classList.add('increase');
	            else if (parseFloat(saisaishin.textContent) < 0) saisaishin.classList.add('decrease');
	        };

	        Chart.register(ChartDataLabels);
	        
	        const ctx = document.getElementById('stackedBarChart').getContext('2d');
	        
	        const myChart = new Chart(ctx, {
	            type: 'bar',
	            data: {
	                labels: ['2024年7月～2025年1月', '2025年2月～2025年8月'],
	                datasets: [
	                    {
	                        label: '初診',
	                        data: data['初診'],
	                        backgroundColor: 'rgba(255, 99, 132, 0.5)',
	                        borderColor: 'rgba(255, 99, 132, 1)',
	                        borderWidth: 1,
	                        datalabels: {
	                            formatter: (value, context) => {
	                                return value;
	                            }
	                        }
	                    },
	                    {
	                        label: '初診者の再診',
	                        data: data['初診者の再診'],
	                        backgroundColor: 'rgba(54, 162, 235, 0.5)',
	                        borderColor: 'rgba(54, 162, 235, 1)',
	                        borderWidth: 1,
	                        datalabels: {
	                            formatter: (value, context) => {
	                                return value;
	                            }
	                        }
	                    },
	                    {
	                        label: '以前からの再診',
	                        data: data['以前からの再診'],
	                        backgroundColor: 'rgba(75, 192, 192, 0.5)',
	                        borderColor: 'rgba(75, 192, 192, 1)',
	                        borderWidth: 1,
	                        datalabels: {
	                            formatter: (value, context) => {
	                                return value;
	                            }
	                        }
	                    }
	                ]
	            },
	            options: {
	                responsive: true,
	                maintainAspectRatio: false,
	                scales: {
	                    x: {
	                        stacked: true,
	                        ticks: {
	                            font: {
	                                size: 12 // x軸ラベルのフォントサイズを縮小 (元のサイズ15の2/3程度)
	                            }
	                        }
	                    },
	                    y: {
	                        stacked: true,
	                        title: {
	                            display: true,
	                            text: '人'
	                        },
	                        ticks: {
	                            font: {
	                                size: 12 // y軸ラベルのフォントサイズを縮小
	                            }
	                        }
	                    }
	                },
	                plugins: {
	                    title: {
	                        display: true,
	                        text: '項目別期間比較グラフ',
	                        font: {
	                            size: 13 // タイトルのフォントサイズを縮小
	                        }
	                    },
	                    legend: {
	                        labels: {
	                            font: {
	                                size: 12 // 凡例のフォントサイズを縮小
	                            }
	                        }
	                    },
	                    datalabels: {
	                        color: 'black',
	                        anchor: 'end',
	                        align: 'end',
	                        font: {
	                            size: 12 // データラベルのフォントサイズを縮小
	                        }
	                    }
	                }
	            }
	        });
	        
	        updateTable();
	    </script>

		<h2 id="back"><a href="index.html">戻る</a></h2>
		<br>
	</div>
	<br>
	<br>
	<footer class="fixed-bottom">
        <div class="container">
        	<p class="float-left">受診時は保険証あるいはマイナンバーカードをお持ちください。
        		<br>医療証・お薬手帳をお持ちの方はご持参ください。</p>
        		<a href="#header-nav" class="float-right">トップへ</a>
        </div>
    </footer>
	<script src="js/jquery-3.5.1.min.js"></script>
	<script src="js/bootstrap.js"></script>
	<script src="js/original.js"></script>
</body>
</html>