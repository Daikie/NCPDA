<!DOCTYPE html>
<html lang="ja">
<head>
	
</head>
<body>
	<script language="javascript" type="text/javascript">
		function getJson() {
			tel = document.getElementById("tel").value;
			var req = new XMLHttpRequest();
			//req.open("GET", "https://api.coindesk.com/v1/bpi/currentprice.json", false);
			req.open("POST", "https://goolnk.com/api/v1/shorten");
			req.setRequestHeader("Content-type", "application/json; charset=utf-8");
			req.setResponseHeader("Access-Control-Allow-Origin", "*"); 
			alert(req.getResponseHeader("Access-Control-Allow-Origin"));
			req.onreadystatechange = function() {
				if(req.readyState == 4 && req.status == 200){ // 
					const jsonlist = JSON.parse(req.responseText);
					let div1 = document.getElementById('div1');
					//div1.insertAdjacentHTML('afterend', jsonlist["bpi"]["USD"]["rate"]);
					div1.insertAdjacentHTML('afterend', jsonlist["result_url"]);
					div1.insertAdjacentHTML('afterend', tel);
				}
			};
			req.send("url=https%3A%2F%2Fgoogle.com%2F");	
		}
	</script>
	<form action="https://api.coindesk.com/v1/bpi/currentprice.json" method="get">
		<p>携帯電話番号<input type="text" id="tel"></p>
		<p><input type="button" value="JSONファイルを取得する" onclick="getJson()"></p>
	</form>
	<div id="div1"></div>
</body>